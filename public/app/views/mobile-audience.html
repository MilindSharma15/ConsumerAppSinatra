<div class="market-analysis-section">
	<h2>Mobile Audience</h2>
	<!-- Inputs -->
	<b>Platform * :</b>
	<select ng-model="input.platform" ng-required
 		ng-options="platform for platform in input.platforms">
  </select>
  <b># of Top Apps * :</b> <input type="number" ng-model="input.noofresults" ng-required />
  <button class="search_btn btn" ng-click="search()" ng-disabled="!input.platform || !input.noofresults"><span class="icon glyphicon glyphicon-search"></span>&nbsp;Search</button>
  <b>Sort By :</b>
	<select class="feature" ng-model="sortBy"
 		ng-options="field for field in sortByFields">
  </select>
  <h3 class="redFont">{{output.message}}</h3>
  <br><br><br><br>
	<!-- Result -->
	<accordion close-others="true">
	  <accordion-group  heading="Statistics" is-open="true">
			<div ng-repeat="app in AppDetails">
				<div class="marginBottom" ng-show="$first">
					<span class="column vborder"
						ng-class="{sorted: sortBy == 'AppName'}">
						App<br>Name
					</span>
					<span class="column column70 vborder"
						ng-class="{sorted: sortBy == 'UniqueAudience'}">
						Unique<br>Audience
					</span>
					<span class="column column70 vborder"
						ng-class="{sorted: sortBy == 'ActiveReach'}">
						Active<br>Reach
					</span>
					<span class="column column70 vborder"
						ng-class="{sorted: sortBy == 'TotalDurationMin'}">
						Total<br>Duration
					</span>
					<span class="column column70 vborder"
						ng-class="{sorted: sortBy == 'TotalVisits'}">
						Total<br>Visits
					</span>
					<span class="column column70 vborder"
						ng-class="{sorted: sortBy == 'VisitsPerPerson'}">
						Visits/<br>Person
					</span>
					<span class="column column70 vborder"
						ng-class="{sorted: sortBy == 'TimePerPerson'}">
						Time/<br>Person
					</span>
					<span class="column vborder column-split"
						ng-class="{sorted: sortBy == 'MalePercentage' || sortBy == 'FemalePercentage'}">
						Male<br>Female %
					</span>
				</div>
			
				<span class="column cell fontTiny"><b>{{app.AppName}}</b></span>
				<span class="column column70 cell {{app.UniqueAudienceClass}}">
					{{app.UniqueAudience | unitCon}}
				</span>
				<span class="column column70 cell {{app.ActiveReachClass}}">
					{{app.ActiveReach}}
				</span>
				<span class="column column70 cell {{app.TotalDurationMinClass}}">
					{{app.TotalDurationMin | unitCon}}
				</span>
				<span class="column column70 cell {{app.TotalVisitsClass}}">
					{{app.TotalVisits | unitCon}}
				</span>
				<span class="column column70 cell {{app.VisitsPerPersonClass}}">
					{{app.VisitsPerPerson}}
				</span>
				<span class="column column70 cell {{app.TimePerPersonMinClass}}">
					{{app.TimePerPersonMin}}
				</span>
				<span class="column column-split cell">
					<span class="bar0" style="width:{{Math.round(app.MalePercentage)}}%" tooltip='Male'>
						{{Math.round(app.MalePercentage)}}%
					</span>
					<span class="bar1" style="width:{{Math.round(app.FemalePercentage)}}%" tooltip='Female'>
						{{Math.round(app.FemalePercentage)}}%
					</span>
				</span>
			</div>
		</accordion-group>
		<accordion-group  heading="Age Group" is-open="true">
			<div ng-repeat="app in AppDetails">
				<div class="marginBottom" ng-show="$first">
					<span class="column vborder"
						ng-class="{sorted: sortBy == 'AppName'}">
						App<br>Name
					</span>
					<span class="column vborder">Age<br>Groups%</span>
				</div>
				<span class="column cell fontTiny"><b>{{app.AppName}}</b></span>
				<span class="column column-big cell">
					<span class="bar{{$index}}" style="width:{{Math.round(v)}}%" 
						ng-repeat="(k, v) in app.AgeBreakPercentage track by $index" tooltip='{{k | agefilter}} | {{v}}%'>
						{{Math.round(v)}}%
					</span>
				</span>
			</div>
		</accordion-group>
		<accordion-group  heading="Income Group" is-open="true">
			<div ng-repeat="app in AppDetails">
				<div class="marginBottom" ng-show="$first">
					<span class="column vborder"
						ng-class="{sorted: sortBy == 'AppName'}">
						App<br>Name
					</span>
					<span class="column vborder">Income<br>Groups%</span>
				</div>
				<span class="column cell fontTiny"><b>{{app.AppName}}</b></span>
				<span class="column column-big cell">
					<span class="bar{{$index}}" style="width:{{Math.round(v)}}%"
						ng-repeat="(k, v) in app.IncomePercentage_in_Dollar track by $index" tooltip='{{k | incomefilter}} | {{v}}%'>
						{{Math.round(v)}}%
					</span>
				</span>
			</div>
		</accordion-group>
		<accordion-group  heading="Race Group" is-open="true">
			<div ng-repeat="app in AppDetails">
				<div class="marginBottom" ng-show="$first">
					<span class="column vborder"
						ng-class="{sorted: sortBy == 'AppName'}">
						App<br>Name
					</span>
					<span class="column vborder">Race<br>Groups%</span>
				</div>
				<span class="column cell fontTiny"><b>{{app.AppName}}</b></span>
				<span class="column column-big cell">
					<span class="bar{{$index}}" style="width:{{Math.round(v)}}%"
						ng-repeat="(k, v) in app.RacePercentage track by $index" tooltip='{{k | racefilter}}'>
						{{Math.round(v)}}%
					</span>
				</span>
			</div>
		</accordion-group>
	</accordion>		
</div>